<%- include ('../partials/header') %>
    <style>
        .upload-container {
            display: flex;
            gap: 10px;
        }

        .image-preview {
            position: relative;
            display: inline-block;
            width: 120px;
            height: 120px;
            overflow: hidden;
            border-radius: 10px;
            text-align: center;
            border: 2px dashed #ccc;
            margin: 10px;
        }

        .image-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .remove-btn {
            position: absolute;
            top: 5px;
            right: 5px;
            background: red;
            color: white;
            border: none;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        #upload-area {
            width: 120px;
            height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px dashed #aaa;
            border-radius: 10px;
            cursor: pointer;
            margin: 10px;
        }

        #upload-area.hidden {
            display: none;
        }

        #image-list {
            display: flex;
        }
    </style>
    <div class="pc-container">
        <div class="pc-content">
            <!-- [ breadcrumb ] start -->
            <div class="page-header">
                <div class="page-block">
                    <div class="row align-items-center">
                        <div class="col-md-12">
                            <ul class="breadcrumb">
                                <li class="breadcrumb-item"><a href="/">Anasayfa</a></li>
                                <li class="breadcrumb-item"><a href="/admin/">Admin</a></li>
                                <li class="breadcrumb-item" aria-current="page">ÃœrÃ¼n Ekle</li>
                            </ul>
                        </div>
                        <div class="col-md-12">
                            <div class="page-header-title">
                                <h2 class="mb-0">Yeni ÃœrÃ¼n Ekle</h2>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- [ breadcrumb ] end -->

            <!-- [ Main Content ] start -->
            <div class="row">
                <!-- [ sample-page ] start -->
                <div class="col-sm-12">
                    <div class="card">
                        <div class="card-body">
                            <div class="mt-3 mb-5">
                                <ul class="nav nav-pills mb-3">
                                    <li class="nav-item" style="user-select: none; cursor: pointer;">
                                        <a class="nav-link active" id="pills-home-tab" data-bs-toggle="pill" role="tab"
                                            aria-controls="pills-home" aria-selected="true">Genel Bilgiler</a>
                                    </li>
                                    <li class="nav-item" style="user-select: none; cursor: pointer;">
                                        <a class="nav-link" role="tab" aria-controls="pills-home" aria-selected="true"
                                            id="pills-home-tab" data-bs-toggle="pill" data-target="details-2"
                                            onclick="scrollToSection(this)">ÃœrÃ¼n DetaylarÄ±</a>
                                    </li>
                                    <li class="nav-item" style="user-select: none; cursor: pointer;">
                                        <a class="nav-link" role="tab" aria-controls="pills-home" aria-selected="true"
                                            id="pills-home-tab" data-bs-toggle="pill" data-target="details-3"
                                            onclick="scrollToSection(this)">Teknik Detaylar</a>
                                    </li>
                                    <li class="nav-item" style="user-select: none; cursor: pointer;">
                                        <a class="nav-link" role="tab" aria-controls="pills-home" aria-selected="true"
                                            id="pills-home-tab" data-bs-toggle="pill" data-target="details-4"
                                            onclick="scrollToSection(this)">Estetik Detaylar</a>
                                    </li>
                                    <li class="nav-item" style="user-select: none; cursor: pointer;">
                                        <a class="nav-link" role="tab" aria-controls="pills-home" aria-selected="true"
                                            id="pills-home-tab" data-bs-toggle="pill" data-target="details-5"
                                            onclick="scrollToSection(this)">Seo Bilgileri</a>
                                    </li>
                                </ul>
                            </div>
                            <form method="POST" action="/admin/product/add">
                                <div class="my-3">
                                    <h3>Genel Bilgiler</h3>
                                </div>
                                <div class="row">
                                    <div class="form-group col-md-6">
                                        <label class="form-label">ÃœrÃ¼n AdÄ±</label>
                                        <input name="productName" id="productName" type="text" class="form-control"
                                            placeholder="ÃœrÃ¼nÃ¼n adÄ±nÄ± girin" required>
                                    </div>
                                    <div class="form-group col-md-6">
                                        <label class="form-label">Kategori</label>
                                        <select class="form-control" data-trigger name="category"
                                            id="choices-single-default" required>
                                            <option value="">Bir kategori seÃ§in</option>
                                            <% foundAllCategory.forEach((category)=> {%>
                                                <option value="<%=category._id%>">
                                                    <%= category.name %>
                                                </option>
                                                <% }) %>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">ÃœrÃ¼n AÃ§Ä±klamasÄ±</label>
                                    <textarea name="description" type="text" class="form-control"
                                        placeholder="ÃœrÃ¼n aÃ§Ä±klamasÄ± girin" required></textarea>
                                </div>
                                <div class="row">
                                    <div class="form-group col-md-6">
                                        <label class="form-label">Stok Durumu</label>
                                        <select name="stock" class="form-select">
                                            <option value="true">Stokta</option>
                                            <option value="false">Stokta DeÄŸil</option>
                                        </select>
                                    </div>
                                    <div class="form-group col-md-4">
                                        <label class="form-label">SatÄ±ÅŸ Durumu</label>
                                        <select name="saleStatus" class="form-select">
                                            <option value="true">SatÄ±ÅŸta</option>
                                            <option value="false">SatÄ±ÅŸtan kaldÄ±rÄ±ldÄ±</option>
                                        </select>
                                    </div>
                                    <div class="form-group col-md-2">
                                        <label class="form-label">ÃœrÃ¼nÃ¼n Garantisi</label>
                                        <select name="warrantyPeriod" class="form-select">
                                            <option selected disabled>YÄ±l</option>
                                            <option value="1">1</option>
                                            <option value="2">2</option>
                                            <option value="3">3</option>
                                            <option value="4">4</option>
                                            <option value="5">5</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="mb-3 mt-5">
                                    <h3 id="details-6">ÃœrÃ¼n GÃ¶rselleri</h3>
                                </div>
                                <div class="row">
                                    <input type="hidden" class="form-control mt-5" style="height: 100px;" name="receiptImage"
                                        id="receiptImage" required>
                                    <input type="file" id="file-input" hidden>
                                    <div  id="image-list" style="display:none;"></div>
                                    <div id="upload-area">+</div>
                                </div>
                                <div class="mb-3 mt-5">
                                    <h3 id="details-2">ÃœrÃ¼n DetaylarÄ±</h3>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">KullanÄ±m AlanÄ±</label>
                                    <textarea name="usageArea" type="text" class="form-control"
                                        placeholder="KullanÄ±m alanlarÄ±nÄ± yazÄ±n"></textarea>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Uygulama TalimatlarÄ±</label>
                                    <textarea name="applicationInstructions" type="text" class="form-control"
                                        placeholder="KullanÄ±m alanlarÄ±nÄ± yazÄ±n"></textarea>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">ÃœrÃ¼n Videosu</label>
                                    <input name="productVideo" type="text" class="form-control"
                                        placeholder="https://www.youtube.com/embed/asd8fsa9hv9" autocomplete="off">
                                </div>
                                <div class="row">
                                    <div class="form-group col-md-1">
                                        <label class="form-label">En</label>
                                        <input name="width" type="text" class="form-control" placeholder="1 m"
                                            autocomplete="off">
                                    </div>
                                    <div class="form-group col-md-1">
                                        <label class="form-label">Boy</label>
                                        <input name="height" type="text" class="form-control" placeholder="3 m"
                                            autocomplete="off">
                                    </div>
                                    <div class="form-group col-md-1">
                                        <label class="form-label">KalÄ±nlÄ±k</label>
                                        <input name="thickness" type="text" class="form-control" placeholder="15 cm"
                                            autocomplete="off">
                                    </div>
                                    <div class="form-group col-md-1">
                                        <label class="form-label">AÄŸÄ±rlÄ±k</label>
                                        <input name="weight" type="text" class="form-control" placeholder="15 lt"
                                            autocomplete="off">
                                    </div>
                                    <div class="form-group col-md-1">
                                        <label class="form-label">YoÄŸunluk</label>
                                        <input name="density" type="text" class="form-control" placeholder="1.2 gr/cm3"
                                            autocomplete="off">
                                    </div>
                                    <div class="form-group col-md-2">
                                        <label class="form-label">Malzeme TÃ¼rÃ¼</label>
                                        <input name="materialType" type="text" class="form-control"
                                            placeholder="Malzeme TÃ¼rÃ¼" autocomplete="off">
                                    </div>
                                    <div class="form-group col-md-5">
                                        <label class="form-label">Renk seÃ§enekleri</label>
                                        <input name="colorOptions" class="form-control" id="choices-text-remove-button"
                                            type="text" value="" placeholder="Enter something">
                                        <small>Renk girin ve enter tuÅŸuna basÄ±n</small>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="form-group col-md-1">
                                        <label class="form-label">Fiyat</label>
                                        <input name="price" type="text" class="form-control" placeholder="1000 â‚º"
                                            autocomplete="off">
                                    </div>
                                    <div class="form-group col-md-1">
                                        <label class="form-label">Ä°ndirim</label>
                                        <input name="discount" type="text" class="form-control" placeholder="3%"
                                            autocomplete="off">
                                    </div>
                                    <div class="form-group col-md-4">
                                        <label class="form-label">ÃœrÃ¼n SertifikasÄ±</label>
                                        <input name="productCertificate" type="text" class="form-control"
                                            placeholder="TSE" autocomplete="off">
                                    </div>
                                    <div class="form-group col-md-6">
                                        <label class="form-label">Sertifika BaÄŸlantÄ±sÄ±</label>
                                        <input name="certificateLink" type="text" class="form-control"
                                            placeholder="https://sertifika.com/belge.pdf" autocomplete="off">
                                    </div>
                                </div>
                                <div class="mb-3 mt-5">
                                    <h3 id="details-3">Teknik Detaylar</h3>
                                </div>
                                <div class="row">
                                    <div class="form-group col-md-3">
                                        <label class="form-label">IsÄ± yalÄ±tÄ±mÄ±</label>
                                        <select name="thermalInsulation" class="form-select">
                                            <option selected disabled>YalÄ±tÄ±m derecesi</option>
                                            <option value="YÃ¼ksek">YÃ¼ksek</option>
                                            <option value="Orta">Orta</option>
                                            <option value="DÃ¼ÅŸÃ¼k">DÃ¼ÅŸÃ¼k</option>
                                        </select>
                                    </div>
                                    <div class="form-group col-md-3">
                                        <label class="form-label">Su yalÄ±tÄ±mÄ±</label>
                                        <select name="waterInsulation" class="form-select">
                                            <option selected disabled>YalÄ±tÄ±m derecesi</option>
                                            <option value="YÃ¼ksek">YÃ¼ksek</option>
                                            <option value="Orta">Orta</option>
                                            <option value="DÃ¼ÅŸÃ¼k">DÃ¼ÅŸÃ¼k</option>
                                        </select>
                                    </div>
                                    <div class="form-group col-md-3">
                                        <label class="form-label">YangÄ±n yalÄ±tÄ±mÄ±</label>
                                        <select name="fireInsulation" class="form-select">
                                            <option selected disabled>YalÄ±tÄ±m derecesi</option>
                                            <option value="YÃ¼ksek">YÃ¼ksek</option>
                                            <option value="Orta">Orta</option>
                                            <option value="DÃ¼ÅŸÃ¼k">DÃ¼ÅŸÃ¼k</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="mb-3 mt-5">
                                    <h3 id="details-4">Estetik DetaylarÄ±</h3>
                                </div>
                                <div class="row">
                                    <div class="form-group col-md-3">
                                        <label class="form-label">YÃ¼zey dokusu</label>
                                        <select name="surfaceTexture" class="form-select">
                                            <option selected disabled>Doku seÃ§in</option>
                                            <option value="PÃ¼rÃ¼zlÃ¼">PÃ¼rÃ¼zlÃ¼</option>
                                            <option value="GranÃ¼llÃ¼">GranÃ¼llÃ¼</option>
                                            <option value="DÃ¼z">DÃ¼z</option>
                                        </select>
                                    </div>
                                    <div class="form-group col-md-3">
                                        <label class="form-label">ParlaklÄ±k</label>
                                        <select name="glossiness" class="form-select">
                                            <option selected disabled>ParlaklÄ±k derecesi</option>
                                            <option>Parlak</option>
                                            <option>YarÄ± mat</option>
                                            <option>Mat</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="mb-3 mt-5">
                                    <h3 id="details-5">ÃœrÃ¼n Seo (Meta) Bilgileri</h3>
                                </div>
                                <div class="form-group col-md-6">
                                    <label class="form-label">ÃœrÃ¼n Linki</label>
                                    <input name="productLink" id="productLink" type="text" class="form-control"
                                        placeholder="tasyunu-sandvic-panel" autocomplete="off" required>
                                </div>
                                <div class="form-group col-md-6">
                                    <label class="form-label">Meta AÃ§Ä±klamasÄ±</label>
                                    <textarea name="productMetaDescription" type="text" class="form-control"
                                        placeholder="ÃœrÃ¼n iÃ§in meta aÃ§Ä±klama girin"></textarea>
                                </div>
                                <div class="form-group col-md-6">
                                    <label class="form-label">Meta Anahtar Kelimeler</label>
                                    <input name="productMetaKeywords" class="form-control"
                                        id="choices-text-remove-button-2" type="text" value=""
                                        placeholder="Enter something">
                                    <small>Anahtar kelime yazÄ±n ve enter tuÅŸuna basÄ±n</small>
                                </div>

                                <div class="text-end btn-page mb-0 mt-4">
                                    <a href="/admin" class="btn btn-outline-secondary">Ä°ptal Et</a>
                                    <a href="/admin/product-add" class="btn btn-outline-secondary">Formu SÄ±fÄ±rla</a>
                                    <button type="submit" class="btn btn-primary">Yeni ÃœrÃ¼nÃ¼ OluÅŸtur</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                <!-- [ sample-page ] end -->
            </div>
            <!-- [ Main Content ] end -->

            <div class="notifier-container" id="notifier-container" style="margin-top: 70px !important;"></div>

            <!--[ Notification] start-->
            <script>
                'use strict';

                document.addEventListener('DOMContentLoaded', function () {
                    // Sunucudan gelen hata mesajÄ±
                    const errorMessage = "<%= errorMessage ? errorMessage : '' %>";
                    const successMessage = "<%= successMessage ? successMessage : '' %>";

                    // EÄŸer bir hata mesajÄ± varsa, uyarÄ± bildirimi gÃ¶ster
                    if (errorMessage) {
                        notifier.show(
                            'UyarÄ±!',
                            errorMessage,
                            'warning',
                            '/dashboard/assets/images/notification/medium_priority-48.png',
                            4000
                        );
                    }

                    // EÄŸer bir baÅŸarÄ± mesajÄ± varsa, baÅŸarÄ± bildirimi gÃ¶ster
                    if (successMessage) {
                        notifier.show(
                            'BaÅŸarÄ±lÄ±!',
                            successMessage,
                            'success',
                            '/dashboard/assets/images/notification/ok-48.png',
                            4000
                        );
                    }
                });
            </script>
            <!--[ Notification] end-->

        </div>
    </div>

    <script>
        const uploadArea = document.getElementById("upload-area");
        const fileInput = document.getElementById("file-input");
        const imageList = document.getElementById("image-list");
        const receiptImageInput = document.getElementById("receiptImage");
        let uploadedImages = [];

        uploadArea.addEventListener("click", () => fileInput.click());
        fileInput.addEventListener("change", async (event) => {
            const file = event.target.files[0];
            if (file) {
                await uploadImage(file);
            }
        });

        async function uploadImage(file) {
            const formData = new FormData();
            formData.append("image", file);
            const response = await fetch(`https://api.imgbb.com/1/upload?key=<%=IMGBB_API_KEY%>`, {
                method: "POST",
                body: formData
            });
            const result = await response.json();
            if (result.success) {
                addImage(result.data.url);
            }
        }

        function addImage(url) {
            if (uploadedImages.length >= 3) return;
            uploadedImages.push(url);
            updateInputValue();
            
            const imageDiv = document.createElement("div");
            imageDiv.classList.add("image-preview");
            imageDiv.classList.add("col-md-2");
            imageDiv.innerHTML = `<img src="${url}" alt="Uploaded Image"><button class="remove-btn">Ã—</button>`;
            imageList.insertAdjacentElement("beforebegin", imageDiv);
            
            imageDiv.querySelector(".remove-btn").addEventListener("click", () => {
                uploadedImages = uploadedImages.filter(img => img !== url);
                updateInputValue();
                imageDiv.remove();
                uploadArea.classList.remove("hidden");
            });

            if (uploadedImages.length >= 3) {
                uploadArea.classList.add("hidden");
            }
        }

        function updateInputValue() {
            receiptImageInput.value = uploadedImages.join(",");
        }
    </script>


    <!--[ resimleri gÃ¶rÃ¼tÃ¼leme scripti] start-->
    <!-- <script>
        // Resimleri gÃ¼ncelleyen fonksiyon
        function updateImages() {
            // receiptImage2 alanÄ±ndaki deÄŸerleri al
            var receiptImages = document.getElementById('receiptImage').value;

            // Resim linklerini virgÃ¼lle ayÄ±r
            var imageLinks = receiptImages.split(',').map(function (link) {
                return link.trim(); // boÅŸluklardan arÄ±ndÄ±r
            });

            // Resimleri varsa, her bir linki gÃ¶sterecek ÅŸekilde dÃ¼zenle
            if (imageLinks[0]) {
                document.getElementById('firstImage').style.display = 'block';
                document.getElementById('firstImage').setAttribute('data-lightbox', imageLinks[0]);
                document.getElementById('firstImage').querySelector('img').setAttribute('src', imageLinks[0]);
            } else {
                document.getElementById('firstImage').style.display = 'none'; // Yoksa gizle
            }

            if (imageLinks[1]) {
                document.getElementById('secondImage').style.display = 'block';
                document.getElementById('secondImage').setAttribute('data-lightbox', imageLinks[1]);
                document.getElementById('secondImage').querySelector('img').setAttribute('src', imageLinks[1]);
            } else {
                document.getElementById('secondImage').style.display = 'none'; // Yoksa gizle
            }

            if (imageLinks[2]) {
                document.getElementById('thirdImage').style.display = 'block';
                document.getElementById('thirdImage').setAttribute('data-lightbox', imageLinks[2]);
                document.getElementById('thirdImage').querySelector('img').setAttribute('src', imageLinks[2]);
            } else {
                document.getElementById('thirdImage').style.display = 'none'; // Yoksa gizle
            }

            // EÄŸer resimler yoksa, formu gizle
            if (!imageLinks[0] && !imageLinks[1] && !imageLinks[2]) {
                document.getElementById('imagesGroup').style.display = 'none';
            } else {
                document.getElementById('imagesGroup').style.display = 'block';
            }
        }

        // Ä°lk baÅŸta sayfa yÃ¼klendiÄŸinde bir kez Ã§alÄ±ÅŸtÄ±r
        updateImages();

        // receiptImage2 input'undaki deÄŸiÅŸiklikleri izleyin
        const receiptImageInput = document.getElementById('receiptImage');
        const observer = new MutationObserver(updateImages);

        // observer'Ä± receiptImage2 input'u Ã¼zerinde value deÄŸiÅŸikliklerini izlemek iÃ§in baÅŸlat
        observer.observe(receiptImageInput, {
            attributes: true, // sadece attribute deÄŸiÅŸikliklerini izle
            attributeFilter: ['value'] // sadece value deÄŸiÅŸikliklerini izle
        });
    </script> -->
    <!--[ resimleri gÃ¶rÃ¼tÃ¼leme scripti] end-->


    <!-- ÃœrÃ¼n linki oluÅŸturma -->
    <script>
        document.getElementById('productName').addEventListener('input', function () {
            const productName = this.value;

            // TÃ¼rkÃ§e karakterleri Ä°ngilizceye Ã§evirme fonksiyonu
            const turkishToEnglish = (text) => {
                const charMap = {
                    'Ã§': 'c', 'ÄŸ': 'g', 'Ä±': 'i', 'Ã¶': 'o', 'ÅŸ': 's', 'Ã¼': 'u',
                    'Ã‡': 'C', 'Äž': 'G', 'Ä°': 'I', 'Ã–': 'O', 'Åž': 'S', 'Ãœ': 'U'
                };
                return text.replace(/[Ã§ÄŸÄ±Ã¶ÅŸÃ¼Ã‡ÄžÄ°Ã–ÅžÃœ]/g, char => charMap[char] || char);
            };

            // Ä°ÅŸlenmiÅŸ linki oluÅŸtur
            const productLink = turkishToEnglish(productName)
                .toLowerCase()        // KÃ¼Ã§Ã¼k harfe Ã§evir
                .replace(/\s+/g, '-') // BoÅŸluklarÄ± "-" ile deÄŸiÅŸtir
                .replace(/[^a-z0-9-]/g, '') // Harf, rakam ve '-' dÄ±ÅŸÄ±ndaki karakterleri kaldÄ±r
                .replace(/-+/g, '-'); // Birden fazla "-" karakterini tek "-" yap

            // productLink inputuna yaz
            document.getElementById('productLink').value = productLink;
        });
    </script>
    <!-- ÃœrÃ¼n linki oluÅŸturma sonu -->


    <!-- MenÃ¼ YÃ¶nlendirme -->
    <script>
        function scrollToSection(button) {
            const targetId = button.getAttribute("data-target");
            const targetElement = document.getElementById(targetId);

            if (targetElement) {
                targetElement.scrollIntoView({ behavior: "smooth" });
            }
        }
    </script>
    <!-- MenÃ¼ YÃ¶nlendirme sonu-->


    <!-- [ Upload ] start-->
    <!-- <script src="/dashboard/assets/js/plugins/uppy.min.js"></script>
    <script>
        const Tus = Uppy.Tus;
        const StatusBar = Uppy.StatusBar;
        const FileInput = Uppy.FileInput;

        // Function to upload to ImgBB
        const uploadToImgBB = (file) => {
            const formData = new FormData();
            formData.append('image', file);

            return fetch('https://api.imgbb.com/1/upload?key=<%=IMGBB_API_KEY%>', { // API Key burada olacak
                method: 'POST',
                body: formData
            })
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`Network response was not ok: ${response.status} ${response.statusText}`);
                    }
                    return response.json();
                })
                .then(data => {
                    if (data && data.data && data.data.url) {
                        return data.data.url;  // Ä°majÄ±n URL'sini dÃ¶ndÃ¼recek
                    } else {
                        throw new Error('ImgBB API response did not contain a link.');
                    }
                })
                .catch(error => {
                    console.error('Error uploading to ImgBB:', error);
                });
        };

        // Function for handling successful image upload
        const onUploadSuccess = (file) => {
            console.log('Uploading file:', file);
            uploadToImgBB(file).then((imgbbUrl) => {
                // Dosya ImgBB'ye yÃ¼klendikten sonra URL'yi `receiptImage` input'una yazdÄ±r
                const receiptImageInput = document.querySelector('#receiptImage');

                // EÄŸer input boÅŸ deÄŸilse, mevcut deÄŸere virgÃ¼lle ekle
                if (receiptImageInput.value) {
                    receiptImageInput.value += `, ${imgbbUrl}`;
                } else {
                    receiptImageInput.value = imgbbUrl;
                }

                // AyrÄ±ca dosya baÄŸlantÄ±sÄ±nÄ± listeye eklemek istiyorsan:
                const li = document.createElement('li');
                const a = document.createElement('a');
                a.href = imgbbUrl;
                a.target = '_blank';
                a.appendChild(document.createTextNode(file.name));
                li.appendChild(a);
                document.querySelector('#uploadedFilesList').appendChild(li);
            });
        };

        (function () {
            const pc_uppy_5 = new Uppy.Core({ debug: true, autoProceed: true });

            pc_uppy_5
                .use(FileInput, { target: '.UppyInput', pretty: false })
                .use(Tus, { endpoint: 'https://tusd.tusdemo.net/files/' })
                .use(StatusBar, {
                    target: '.UppyInput-Progress',
                    hideUploadButton: true,
                    hideAfterFinish: false
                });

            // Dosya baÅŸarÄ±yla yÃ¼klendikten sonra ImgBB'ye gÃ¶nder
            pc_uppy_5.on('upload-success', (file) => {
                onUploadSuccess(file.data);
            });

            // Inputa CSS sÄ±nÄ±fÄ± ekleme iÅŸlemi
            document.querySelector('.uppy-FileInput-input').classList.add('form-control');
        })();
    </script> -->
    <!-- [ Upload ] end-->


    <script>
        document.addEventListener('DOMContentLoaded', function () {
            var genericExamples = document.querySelectorAll('[data-trigger]');
            for (i = 0; i < genericExamples.length; ++i) {
                var element = genericExamples[i];
                new Choices(element, {
                    placeholderValue: 'This is a placeholder set in the config',
                    searchPlaceholderValue: 'Kategori arayÄ±n'
                });
            }

            var textRemove = new Choices(document.getElementById('choices-text-remove-button'), {
                delimiter: ',',
                editItems: true,
                maxItemCount: 25,
                removeItemButton: true
            });

            var textRemove = new Choices(document.getElementById('choices-text-remove-button-2'), {
                delimiter: ',',
                editItems: true,
                maxItemCount: 25,
                removeItemButton: true
            });

            var text_Unique_Val = new Choices('#choices-text-unique-values', {
                paste: false,
                duplicateItemsAllowed: false,
                editItems: true
            });

            var text_i18n = new Choices('#choices-text-i18n', {
                paste: false,
                duplicateItemsAllowed: false,
                editItems: true,
                maxItemCount: 5,
                addItemText: function (value) {
                    return 'Appuyez sur EntrÃ©e pour ajouter <b>"' + String(value) + '"</b>';
                },
                maxItemText: function (maxItemCount) {
                    return String(maxItemCount) + 'valeurs peuvent Ãªtre ajoutÃ©es';
                },
                uniqueItemText: 'Cette valeur est dÃ©jÃ  prÃ©sente'
            });

            var textEmailFilter = new Choices('#choices-text-email-filter', {
                editItems: true,
                addItemFilter: function (value) {
                    if (!value) {
                        return false;
                    }

                    const regex =
                        /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
                    const expression = new RegExp(regex.source, 'i');
                    return expression.test(value);
                }
            }).setValue(['joe@bloggs.com']);

            var textDisabled = new Choices('#choices-text-disabled', {
                addItems: false,
                removeItems: false
            }).disable();

            var textPrependAppendVal = new Choices('#choices-text-prepend-append-value', {
                prependValue: 'item-',
                appendValue: '-' + Date.now()
            }).removeActiveItems();

            var textPresetVal = new Choices('#choices-text-preset-values', {
                items: [
                    'Josh Johnson',
                    {
                        value: 'joe@bloggs.co.uk',
                        label: 'Joe Bloggs',
                        customProperties: {
                            description: 'Joe Blogg is such a generic name'
                        }
                    }
                ]
            });

            var multipleDefault = new Choices(document.getElementById('choices-multiple-groups'));

            var multipleFetch = new Choices('#choices-multiple-remote-fetch', {
                placeholder: true,
                placeholderValue: 'Pick an Strokes record',
                maxItemCount: 5
            }).setChoices(function () {
                return fetch('https://api.discogs.com/artists/55980/releases?token=QBRmstCkwXEvCjTclCpumbtNwvVkEzGAdELXyRyW')
                    .then(function (response) {
                        return response.json();
                    })
                    .then(function (data) {
                        return data.releases.map(function (release) {
                            return {
                                value: release.title,
                                label: release.title
                            };
                        });
                    });
            });

            var multipleCancelButton = new Choices('#choices-multiple-remove-button', {
                removeItemButton: true
            });

            /* Use label on event */
            var choicesSelect = new Choices('#choices-multiple-labels', {
                removeItemButton: true,
                choices: [
                    {
                        value: 'One',
                        label: 'Label One'
                    },
                    {
                        value: 'Two',
                        label: 'Label Two',
                        disabled: true
                    },
                    {
                        value: 'Three',
                        label: 'Label Three'
                    }
                ]
            }).setChoices(
                [
                    {
                        value: 'Four',
                        label: 'Label Four',
                        disabled: true
                    },
                    {
                        value: 'Five',
                        label: 'Label Five'
                    },
                    {
                        value: 'Six',
                        label: 'Label Six',
                        selected: true
                    }
                ],
                'value',
                'label',
                false
            );

            choicesSelect.passedElement.element.addEventListener('addItem', function (event) {
                document.getElementById('message').innerHTML =
                    '<span class="badge bg-light-primary"> You just added "' + event.detail.label + '"</span>';
            });
            choicesSelect.passedElement.element.addEventListener('removeItem', function (event) {
                document.getElementById('message').innerHTML =
                    '<span class="badge bg-light-danger"> You just removed "' + event.detail.label + '"</span>';
            });

            var singleFetch = new Choices('#choices-single-remote-fetch', {
                searchPlaceholderValue: 'Search for an Arctic Monkeys record'
            })
                .setChoices(function () {
                    return fetch('https://api.discogs.com/artists/391170/releases?token=QBRmstCkwXEvCjTclCpumbtNwvVkEzGAdELXyRyW')
                        .then(function (response) {
                            return response.json();
                        })
                        .then(function (data) {
                            return data.releases.map(function (release) {
                                return {
                                    label: release.title,
                                    value: release.title
                                };
                            });
                        });
                })
                .then(function (instance) {
                    instance.setChoiceByValue('Fake Tales Of San Francisco');
                });

            var singleXhrRemove = new Choices('#choices-single-remove-xhr', {
                removeItemButton: true,
                searchPlaceholderValue: "Search for a Smiths' record"
            }).setChoices(function (callback) {
                return fetch('https://api.discogs.com/artists/83080/releases?token=QBRmstCkwXEvCjTclCpumbtNwvVkEzGAdELXyRyW')
                    .then(function (res) {
                        return res.json();
                    })
                    .then(function (data) {
                        return data.releases.map(function (release) {
                            return {
                                label: release.title,
                                value: release.title
                            };
                        });
                    });
            });

            var singleNoSearch = new Choices('#choices-single-no-search', {
                searchEnabled: false,
                removeItemButton: true,
                choices: [
                    {
                        value: 'One',
                        label: 'Label One'
                    },
                    {
                        value: 'Two',
                        label: 'Label Two',
                        disabled: true
                    },
                    {
                        value: 'Three',
                        label: 'Label Three'
                    }
                ]
            }).setChoices(
                [
                    {
                        value: 'Four',
                        label: 'Label Four',
                        disabled: true
                    },
                    {
                        value: 'Five',
                        label: 'Label Five'
                    },
                    {
                        value: 'Six',
                        label: 'Label Six',
                        selected: true
                    }
                ],
                'value',
                'label',
                false
            );

            var singlePresetOpts = new Choices('#choices-single-preset-options', {
                placeholder: true
            }).setChoices(
                [
                    {
                        label: 'Group one',
                        id: 1,
                        disabled: false,
                        choices: [
                            {
                                value: 'Child One',
                                label: 'Child One',
                                selected: true
                            },
                            {
                                value: 'Child Two',
                                label: 'Child Two',
                                disabled: true
                            },
                            {
                                value: 'Child Three',
                                label: 'Child Three'
                            }
                        ]
                    },
                    {
                        label: 'Group two',
                        id: 2,
                        disabled: false,
                        choices: [
                            {
                                value: 'Child Four',
                                label: 'Child Four',
                                disabled: true
                            },
                            {
                                value: 'Child Five',
                                label: 'Child Five'
                            },
                            {
                                value: 'Child Six',
                                label: 'Child Six'
                            }
                        ]
                    }
                ],
                'value',
                'label'
            );

            var singleSelectedOpt = new Choices('#choices-single-selected-option', {
                searchFields: ['label', 'value', 'customProperties.description'],
                choices: [
                    {
                        value: 'One',
                        label: 'Label One',
                        selected: true
                    },
                    {
                        value: 'Two',
                        label: 'Label Two',
                        disabled: true
                    },
                    {
                        value: 'Three',
                        label: 'Label Three',
                        customProperties: {
                            description: 'This option is fantastic'
                        }
                    }
                ]
            }).setChoiceByValue('Two');

            var customChoicesPropertiesViaDataAttributes = new Choices('#choices-with-custom-props-via-html', {
                searchFields: ['label', 'value', 'customProperties']
            });

            var singleNoSorting = new Choices('#choices-single-no-sorting', {
                shouldSort: false
            });

            var cities = new Choices(document.getElementById('cities'));
            var tubeStations = new Choices(document.getElementById('tube-stations')).disable();

            cities.passedElement.element.addEventListener('change', function (e) {
                if (e.detail.value === 'London') {
                    tubeStations.enable();
                } else {
                    tubeStations.disable();
                }
            });

            var customTemplates = new Choices(document.getElementById('choices-single-custom-templates'), {
                callbackOnCreateTemplates: function (strToEl) {
                    var classNames = this.config.classNames;
                    var itemSelectText = this.config.itemSelectText;
                    return {
                        item: function (classNames, data) {
                            return strToEl(
                                '\
                                  <div\
                                  class="' +
                                String(classNames.item) +
                                ' ' +
                                String(data.highlighted ? classNames.highlightedState : classNames.itemSelectable) +
                                '"\
                                  data-item\
                                  data-id="' +
                                String(data.id) +
                                '"\
                                  data-value="' +
                                String(data.value) +
                                '"\
                                  ' +
                                String(data.active ? 'aria-selected="true"' : '') +
                                '\
                                  ' +
                                String(data.disabled ? 'aria-disabled="true"' : '') +
                                '\
                                  >\
                                  <span style="margin-right:10px;">ðŸŽ‰</span> ' +
                                String(data.label) +
                                '\
                                  </div>\
                                  '
                            );
                        },
                        choice: function (classNames, data) {
                            return strToEl(
                                '\
                                  <div\
                                  class="' +
                                String(classNames.item) +
                                ' ' +
                                String(classNames.itemChoice) +
                                ' ' +
                                String(data.disabled ? classNames.itemDisabled : classNames.itemSelectable) +
                                '"\
                                  data-select-text="' +
                                String(itemSelectText) +
                                '"\
                                  data-choice \
                                  ' +
                                String(data.disabled ? 'data-choice-disabled aria-disabled="true"' : 'data-choice-selectable') +
                                '\
                                  data-id="' +
                                String(data.id) +
                                '"\
                                  data-value="' +
                                String(data.value) +
                                '"\
                                  ' +
                                String(data.groupId > 0 ? 'role="treeitem"' : 'role="option"') +
                                '\
                                  >\
                                  <span style="margin-right:10px;">ðŸ‘‰ðŸ½</span> ' +
                                String(data.label) +
                                '\
                                  </div>\
                                  '
                            );
                        }
                    };
                }
            });

            var resetSimple = new Choices(document.getElementById('reset-simple'));

            var resetMultiple = new Choices('#reset-multiple', {
                removeItemButton: true
            });
        });
    </script>
    <%- include ('../partials/footer') %>